# VTY・シェル管理

**言語 / Language:** [English](../vty-shell.md) | **日本語** | [Français](../fr/vty-shell.md) | [中文](../zh/vty-shell.md)

VTY（Virtual Terminal）とシェルの管理を行うコマンドです。

## コマンド一覧

### clear_cmd - 画面クリア
```
clear
```

VTYの画面をクリアします。

**使用例：**
```bash
clear
```

### vty_exit_cmd - VTY終了
```
(exit|quit|logout)
```

VTYセッションを終了します。複数のエイリアスが利用可能です。

**使用例：**
```bash
exit
# または
quit
# または
logout
```

### shutdown_cmd - システムシャットダウン
```
shutdown
```

sdplaneシステムをシャットダウンします。

**使用例：**
```bash
shutdown
```

**注意：** このコマンドはシステム全体を停止します。実行前に設定の保存やアクティブなセッションの終了を確認してください。

### exit_cmd - コンソール終了
```
(exit|quit)
```

コンソールシェルを終了します。

**使用例：**
```bash
exit
# または
quit
```

## VTYとコンソールの違い

### VTYシェル
- Telnet経由でアクセスするリモートシェル
- 複数のセッションを同時に利用可能
- ネットワーク経由でのアクセスが可能

### コンソールシェル
- ローカルコンソールからのアクセス
- 直接的なシステムアクセス
- 主にローカルでの管理用

## 接続方法

### VTYへの接続
```bash
telnet localhost 9882
```

### コンソールへの接続
```bash
# sdplaneを直接実行
sudo ./sdplane/sdplane
```

## セッション管理

### セッションの確認
VTYセッションの状態は以下のコマンドで確認できます：
```bash
show worker
```

### セッションの終了
- `exit`, `quit`, `logout`コマンドで通常終了
- 異常終了時は`shutdown`コマンドでシステム全体を停止

## セキュリティ考慮事項

### アクセス制御
- VTYはデフォルトでlocalhost（127.0.0.1）からのアクセスのみを許可
- ファイアウォール設定でポート9882のアクセスを制限することを推奨

### セッション監視
- 不要なセッションは適切に終了する
- 長時間のアイドルセッションは定期的に確認する

## トラブルシューティング

### VTYに接続できない場合
1. sdplaneが正常に起動しているか確認
2. ポート9882が利用可能か確認
3. ファイアウォール設定を確認

### セッションが応答しない場合
1. 別のVTYセッションから`show worker`で状態確認
2. 必要に応じて`shutdown`コマンドでシステム再起動

### コマンドが認識されない場合
1. 正しいシェル（VTYまたはコンソール）にいるか確認
2. `?`でヘルプを表示して利用可能なコマンドを確認

## 定義場所

これらのコマンドは以下のファイルで定義されています：
- `sdplane/vty_shell.c` - VTY関連コマンド
- `sdplane/console_shell.c` - コンソール関連コマンド

## 関連項目

- [デバッグ・ログ](debug-logging.md)
- [システム情報・監視](system-monitoring.md)