# การจัดการ VTY และเชลล์

**Language:** [English](../en/vty-shell.md) | [日本語](../ja/vty-shell.md) | [Français](../fr/vty-shell.md) | [中文](../zh/vty-shell.md) | [Deutsch](../de/vty-shell.md) | [Italiano](../it/vty-shell.md) | [한국어](../ko/vty-shell.md) | **ไทย**

คำสั่งที่จัดการ VTY (Virtual Terminal) และเชลล์

## รายการคำสั่ง

### clear_cmd - การล้างหน้าจอ
```
clear
```

ล้างหน้าจอ VTY

**ตัวอย่างการใช้งาน:**
```bash
clear
```

### vty_exit_cmd - การออกจาก VTY
```
(exit|quit|logout)
```

ออกจากเซสชัน VTY มีหลาย alias ที่ใช้ได้

**ตัวอย่างการใช้งาน:**
```bash
exit
# หรือ
quit
# หรือ
logout
```

### shutdown_cmd - การปิดระบบ
```
shutdown
```

ปิดระบบ sdplane

**ตัวอย่างการใช้งาน:**
```bash
shutdown
```

**หมายเหตุ:** คำสั่งนี้จะหยุดระบบทั้งหมด กรุณาตรวจสอบการบันทึกการตั้งค่าและการปิดเซสชันที่ใช้งานอยู่ก่อนการดำเนินการ

### exit_cmd - การออกจากคอนโซล
```
(exit|quit)
```

ออกจากคอนโซลเชลล์

**ตัวอย่างการใช้งาน:**
```bash
exit
# หรือ
quit
```

## ความแตกต่างระหว่าง VTY และคอนโซล

### VTY Shell
- เชลล์ระยะไกลที่เข้าถึงผ่าน Telnet
- สามารถใช้หลายเซสชันพร้อมกันได้
- สามารถเข้าถึงผ่านเครือข่ายได้

### Console Shell
- การเข้าถึงจากคอนโซลโลคัล
- การเข้าถึงระบบโดยตรง
- ใช้สำหรับการจัดการโลคัลเป็นหลัก

## วิธีการเชื่อมต่อ

### การเชื่อมต่อกับ VTY
```bash
telnet localhost 9882
```

### การเชื่อมต่อกับคอนโซล
```bash
# รัน sdplane โดยตรง
sudo ./sdplane/sdplane
```

## การจัดการเซสชัน

### การตรวจสอบเซสชัน
สถานะของเซสชัน VTY สามารถตรวจสอบได้ด้วยคำสั่งต่อไปนี้:
```bash
show worker
```

### การปิดเซสชัน
- ปิดปกติด้วยคำสั่ง `exit`, `quit`, `logout`
- หยุดระบบทั้งหมดด้วยคำสั่ง `shutdown` ในกรณีที่เกิดปัญหา

## ข้อพิจารณาด้านความปลอดภัย

### การควบคุมการเข้าถึง
- VTY อนุญาตให้เข้าถึงจาก localhost (127.0.0.1) เท่านั้นโดยค่าเริ่มต้น
- แนะนำให้จำกัดการเข้าถึงพอร์ต 9882 ด้วยการตั้งค่าไฟร์วอลล์

### การตรวจสอบเซสชัน
- ปิดเซสชันที่ไม่จำเป็นอย่างเหมาะสม
- ตรวจสอบเซสชัน idle ที่ใช้งานเป็นเวลานานอย่างสม่ำเสมอ

## การแก้ไขปัญหา

### เมื่อเชื่อมต่อกับ VTY ไม่ได้
1. ตรวจสอบว่า sdplane เริ่มต้นอย่างปกติหรือไม่
2. ตรวจสอบว่าพอร์ต 9882 ใช้ได้หรือไม่
3. ตรวจสอบการตั้งค่าไฟร์วอลล์

### เมื่อเซสชันไม่ตอบสนอง
1. ตรวจสอบสถานะด้วย `show worker` จากเซสชัน VTY อื่น
2. รีสตาร์ทระบบด้วยคำสั่ง `shutdown` หากจำเป็น

### เมื่อคำสั่งไม่ถูกจดจำ
1. ตรวจสอบว่าอยู่ในเชลล์ที่ถูกต้อง (VTY หรือคอนโซล) หรือไม่
2. แสดงความช่วยเหลือด้วย `?` เพื่อตรวจสอบคำสั่งที่ใช้ได้

## ตำแหน่งการกำหนด

คำสั่งเหล่านี้ถูกกำหนดในไฟล์ต่อไปนี้:
- `sdplane/vty_shell.c` - คำสั่งที่เกี่ยวข้องกับ VTY
- `sdplane/console_shell.c` - คำสั่งที่เกี่ยวข้องกับคอนโซล

## รายการที่เกี่ยวข้อง

- [การดีบักและล็อก](debug-logging.md)
- [ข้อมูลระบบและการตรวจสอบ](system-monitoring.md)